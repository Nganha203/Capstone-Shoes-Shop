import{g as te,r as ne,o as re,p as se,M as I,q as E,A as V,t as O,j as d,F,v as P,w as ae,I as ie,V as $,E as G}from"./index-4920cf17.js";import{S as W,c as ce,a as H}from"./index.esm-f3000cd0.js";import{u as le,a as ue,l as de}from"./user.service-b3b31845.js";import"./config.service-f74b9060.js";const fe="_login_container_14a1f_1",pe="_title_14a1f_8",ge="_line_14a1f_14",he="_form_14a1f_20",me="_form_action_14a1f_39",be="_login_14a1f_1",_e="_register_14a1f_64",ye="_fb_14a1f_73",_={login_container:fe,title:pe,line:ge,form:he,form_action:me,login:be,register:_e,fb:ye};var K={exports:{}};(function(S,b){(function(x,r){S.exports=r(ne)})(re,function(x){return function(r){function i(l){if(o[l])return o[l].exports;var h=o[l]={exports:{},id:l,loaded:!1};return r[l].call(h.exports,h,h.exports,i),h.loaded=!0,h.exports}var o={};return i.m=r,i.c=o,i.p="",i(0)}([function(r,i,o){r.exports=o(4)},function(r,i,o){r.exports=o(6)()},function(r,i){r.exports=x},function(r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(o,l){return decodeURIComponent(o.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent(l).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}},function(r,i,o){function l(s){return s&&s.__esModule?s:{default:s}}function h(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function u(s,t){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?s:t}function m(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(s,t):s.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var w=Object.assign||function(s){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},T=function(){function s(t,n){for(var a=0;a<n.length;a++){var e=n[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(t,n,a){return n&&s(t.prototype,n),a&&s(t,a),t}}(),A=o(2),M=l(A),C=o(1),c=l(C),R=o(5),L=l(R),Y=o(3),N=l(Y),z=function(){var s=!1;try{s=!!(window.navigator&&window.navigator.standalone||navigator.userAgent.match("CriOS")||navigator.userAgent.match(/mobile/i))}catch{}return s},j=function(s){function t(){var n,a,e,y;h(this,t);for(var k=arguments.length,v=Array(k),g=0;g<k;g++)v[g]=arguments[g];return a=e=u(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(v))),e.state={isSdkLoaded:!1,isProcessing:!1},e.responseApi=function(p){window.FB.api("/me",{locale:e.props.language,fields:e.props.fields},function(f){w(f,p),e.props.callback(f)})},e.checkLoginState=function(p){e.setStateIfMounted({isProcessing:!1}),p.authResponse?e.responseApi(p.authResponse):e.props.onFailure?e.props.onFailure({status:p.status}):e.props.callback({status:p.status})},e.checkLoginAfterRefresh=function(p){p.status==="connected"?e.checkLoginState(p):window.FB.login(function(f){return e.checkLoginState(f)},!0)},e.click=function(p){if(e.state.isSdkLoaded&&!e.state.isProcessing&&!e.props.isDisabled){e.setState({isProcessing:!0});var f=e.props,B=f.scope,J=f.appId,U=f.onClick,D=f.returnScopes,Q=f.responseType,X=f.redirectUri,Z=f.disableMobileRedirect,ee=f.authType,oe=f.state;if(typeof U!="function"||(U(p),!p.defaultPrevented)){var q={client_id:J,redirect_uri:X,state:oe,return_scopes:D,scope:B,response_type:Q,auth_type:ee};if(e.props.isMobile&&!Z)window.location.href="https://www.facebook.com/dialog/oauth"+(0,L.default)(q);else{if(!window.FB)return void(e.props.onFailure&&e.props.onFailure({status:"facebookNotLoaded"}));window.FB.login(e.checkLoginState,{scope:B,return_scopes:D,auth_type:q.auth_type})}}}},y=a,u(e,y)}return m(t,s),T(t,[{key:"componentDidMount",value:function(){if(this._isMounted=!0,document.getElementById("facebook-jssdk"))return void this.sdkLoaded();this.setFbAsyncInit(),this.loadSdkAsynchronously();var n=document.getElementById("fb-root");n||(n=document.createElement("div"),n.id="fb-root",document.body.appendChild(n))}},{key:"componentWillReceiveProps",value:function(n){this.state.isSdkLoaded&&n.autoLoad&&!this.props.autoLoad&&window.FB.getLoginStatus(this.checkLoginAfterRefresh)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"setStateIfMounted",value:function(n){this._isMounted&&this.setState(n)}},{key:"setFbAsyncInit",value:function(){var n=this,a=this.props,e=a.appId,y=a.xfbml,k=a.cookie,v=a.version,g=a.autoLoad;window.fbAsyncInit=function(){window.FB.init({version:"v"+v,appId:e,xfbml:y,cookie:k}),n.setStateIfMounted({isSdkLoaded:!0}),(g||n.isRedirectedFromFb())&&window.FB.getLoginStatus(n.checkLoginAfterRefresh)}}},{key:"isRedirectedFromFb",value:function(){var n=window.location.search;return(0,N.default)(n,"code")||(0,N.default)(n,"granted_scopes")}},{key:"sdkLoaded",value:function(){this.setState({isSdkLoaded:!0})}},{key:"loadSdkAsynchronously",value:function(){var n=this.props.language;(function(a,e,y){var k=a.getElementsByTagName(e)[0],v=k,g=k;a.getElementById(y)||(g=a.createElement(e),g.id=y,g.src="https://connect.facebook.net/"+n+"/sdk.js",v.parentNode.insertBefore(g,v))})(document,"script","facebook-jssdk")}},{key:"render",value:function(){var a=this.props.render;if(!a)throw new Error("ReactFacebookLogin requires a render prop to render");var e={onClick:this.click,isDisabled:!!this.props.isDisabled,isProcessing:this.state.isProcessing,isSdkLoaded:this.state.isSdkLoaded};return this.props.render(e)}}]),t}(M.default.Component);j.propTypes={isDisabled:c.default.bool,callback:c.default.func.isRequired,appId:c.default.string.isRequired,xfbml:c.default.bool,cookie:c.default.bool,authType:c.default.string,scope:c.default.string,state:c.default.string,responseType:c.default.string,returnScopes:c.default.bool,redirectUri:c.default.string,autoLoad:c.default.bool,disableMobileRedirect:c.default.bool,isMobile:c.default.bool,fields:c.default.string,version:c.default.string,language:c.default.string,onClick:c.default.func,onFailure:c.default.func,render:c.default.func.isRequired},j.defaultProps={redirectUri:typeof window<"u"?window.location.href:"/",scope:"public_profile,email",returnScopes:!1,xfbml:!1,cookie:!1,authType:"",fields:"name",version:"2.3",language:"en_US",disableMobileRedirect:!1,isMobile:z(),onFailure:null,state:"facebookdirect",responseType:"code"},i.default=j},function(r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(o){return"?"+Object.keys(o).map(function(l){return l+"="+encodeURIComponent(o[l])}).join("&")}},function(r,i,o){function l(){}var h=o(7);r.exports=function(){function u(T,A,M,C,c,R){if(R!==h){var L=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw L.name="Invariant Violation",L}}function m(){return u}u.isRequired=u;var w={array:u,bool:u,func:u,number:u,object:u,string:u,symbol:u,any:u,arrayOf:m,element:u,instanceOf:m,node:u,objectOf:m,oneOf:m,oneOfType:m,shape:m,exact:m};return w.checkPropTypes=l,w.PropTypes=w,w}},function(r,i){var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";r.exports=o}])})})(K);var ke=K.exports;const ve=te(ke),we=ce({email:H().email().required(),password:H().min(5,$.passwordMinLength).required($.passwordRequire)});function Fe(){const S=se(),b=le({initialValues:{email:"",password:""},validationSchema:we,onSubmit:r=>{const i={email:r.email,password:r.password};ue(i).then(o=>{if(typeof o=="string"){alert(o);return}if(o.message===I.dangNhapThanhCong){console.log(o.content.accessToken),E(V,o.content.accessToken),E(G,i.email),S(O.profile);return}}).catch(o=>console.log(o))}}),x=r=>{const i=r.email;de(r.accessToken).then(o=>{(o==null?void 0:o.data.message)===I.dangNhapThanhCong?(E(V,o==null?void 0:o.data.content.accessToken),E(G,i),S(O.profile)):alert(I.fail)}).catch(o=>console.log(o))};return d.jsx(d.Fragment,{children:d.jsxs("div",{className:_.login_container,children:[d.jsx("h1",{className:_.title,children:"Login"}),d.jsx("div",{className:_.line}),d.jsxs("form",{onSubmit:b.handleSubmit,className:_.form,children:[d.jsx(W,{showEye:!1,placeholder:F.Email,type:P.email,title:F.Email,getFieldProps:b.getFieldProps(P.email),touched:b.touched.email,error:b.errors.email}),d.jsx(W,{showEye:!0,title:F.Password,placeholder:F.Password,type:P.password,getFieldProps:b.getFieldProps(P.password),touched:b.touched.password,error:b.errors.password}),d.jsxs("div",{className:_.form_action,children:[d.jsx("button",{type:"submit",className:_.login,children:"Login"}),d.jsx(ae,{className:_.register,to:O.register,children:"Register now ?"}),d.jsx(ve,{appId:"963495338437666",fields:"name,email,picture",render:r=>d.jsxs("button",{onClick:r.onClick,type:"button",className:_.fb,children:["Continue with Facebook",d.jsx("span",{children:d.jsx(ie,{})})]}),callback:x})]})]})]})})}export{Fe as default};
